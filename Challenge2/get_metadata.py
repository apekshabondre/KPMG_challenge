import requests
import json

subscriptionId = "8cd81a6a-32c1-4c0d-858a-672a5fa6d0e3"
resourceGroupName = "rg-test1"
vmName = "VMFrontEnd"
access_token = "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IjlHbW55RlBraGMzaE91UjIybXZTdmduTG83WSIsImtpZCI6IjlHbW55RlBraGMzaE91UjIybXZTdmduTG83WSJ9.eyJhdWQiOiJodHRwczovL21hbmFnZW1lbnQuY29yZS53aW5kb3dzLm5ldC8iLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC9lZjA3M2ZmMy1kMmY2LTRhZTQtOTg4Ni1mMmM4MDlkMmU0ODMvIiwiaWF0IjoxNjk4Njc4MDY0LCJuYmYiOjE2OTg2NzgwNjQsImV4cCI6MTY5ODY4MjgxOCwiYWNyIjoiMSIsImFpbyI6IkFXUUFtLzhVQUFBQTR2amFuM0hLMmFiNnh0dXBIdlJiREc0M1NCWnlheXZxZlVtakpLL0lJd2lDL2F5Qnc3c3U3eHEybDN2dkxFY0VGVnVIdkFEUmh3aFVPYzFNcXhHR0RFbVVZSk11d3hxUW9uQi9md3hoYzVxaEdTcVovVEV5TlVzMVlnbDlkSVEyIiwiYWx0c2VjaWQiOiIxOmxpdmUuY29tOjAwMDNCRkZENkMzNjFCRTYiLCJhbXIiOlsicHdkIl0sImFwcGlkIjoiYjY3N2MyOTAtY2Y0Yi00YThlLWE2MGUtOTFiYTY1MGE0YWJlIiwiYXBwaWRhY3IiOiIwIiwiZW1haWwiOiJhcGVrc2hhYm9uZHJlOTdAb3V0bG9vay5jb20iLCJmYW1pbHlfbmFtZSI6IkJvbmRyZSIsImdpdmVuX25hbWUiOiJBcGVrc2hhIiwiZ3JvdXBzIjpbIjlhNmExYTRmLWNjOTgtNDlkZS04Y2FiLWY4NWE3YjljNzI2NSJdLCJpZHAiOiJsaXZlLmNvbSIsImlkdHlwIjoidXNlciIsImlwYWRkciI6IjEzNi4yMjYuMjMyLjE5OCIsIm5hbWUiOiJBcGVrc2hhIEJvbmRyZSIsIm9pZCI6ImYzMTJjZTI1LTdmODgtNGJlNi04MzhiLTA5YTA0Y2FkYzU2ZCIsInB1aWQiOiIxMDAzMjAwMzBCM0NGNEYyIiwicmgiOiIwLkFTc0E4ejhIN19iUzVFcVlodkxJQ2RMa2cwWklmM2tBdXRkUHVrUGF3ZmoyTUJQQ0FCUS4iLCJzY3AiOiJ1c2VyX2ltcGVyc29uYXRpb24iLCJzdWIiOiJSc2t2RXBUMnczV3NVOTNLeVBOSEtRZnlzRXhUMFFnV19PRHZoaHNJZGpVIiwidGlkIjoiZWYwNzNmZjMtZDJmNi00YWU0LTk4ODYtZjJjODA5ZDJlNDgzIiwidW5pcXVlX25hbWUiOiJsaXZlLmNvbSNhcGVrc2hhYm9uZHJlOTdAb3V0bG9vay5jb20iLCJ1dGkiOiJwUXBnNS1DWFZrR0xIeDMtak5BaEFBIiwidmVyIjoiMS4wIiwid2lkcyI6WyI2MmU5MDM5NC02OWY1LTQyMzctOTE5MC0wMTIxNzcxNDVlMTAiLCJiNzlmYmY0ZC0zZWY5LTQ2ODktODE0My03NmIxOTRlODU1MDkiXSwieG1zX2NhZSI6IjEiLCJ4bXNfdGNkdCI6MTY5ODM5NTcxOX0.rBQciEUm6N7n4faI2qRn-A3zjpJtylKhWxu2txt2dmWS27OdUDh0MQTP_KjvJ5rvAMpHyGVyYNXtG3DDx6KJWB_q5DHnwmiRrTdBmxM-mvoV8zdbjt68XpgNkx-aFV7gEXYauO3iNSF5cPS-NAb4WvZo8VRLV6g1w0EqMzD3NH7awuhauUX72dlMht1zzYKQ9TTrHF5mh3Wnf1F4_uRbOU87tOPSbNPVEks5VG5Q3-BrXY2yzgY9hsv1Nq0bAfGmcCo6lL6q8c2KXRqlRV8vyzdEAqInnUYujxRRHYPXnLsVmtVF2FusYPOilf4PuW24WTwzdHb04WH_kujqSUPixQ"

url = f'https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Compute/virtualMachines/{vmName}?api-version=2023-07-01'

headers = {'Authorization': f'Bearer {access_token}'}

response = requests.get(url, headers=headers)

json_data = response.json()

print(json.dumps(json_data, indent=4))
